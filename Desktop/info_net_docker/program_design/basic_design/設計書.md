# 1. 環境
## 1.1. 開発環境
* [開発環境](https://github.com/xkeiji/info_net_docker)
- Frontend React
- Backend PHP(Laravel),Mysql

## 1.2. リリース環境
* Heroku app を利用
* [デプロイ環境](https://info-net.herokuapp.com/)

### 1.2.1. heroku管理画面　ログイン情報
- ユーザーID:system@wakasaya-pro.jp

- パスワード:waka0501@

- デプロイ方法については、 [開発環境](https://github.com/xkeiji/info_net_docker)を参照のこと

# 2. UI

## 2.1. 画面遷移
* ログイン画面 → ユーザーインフォメーション
* ユーザーインフォメーション →　ログアウト画面 → ログイン画面

## 2.2. 画面内遷移(アプリの切り替え)
* ユーザーインフォメーション
    * → 案件リスト（元請け）
        * → 案件閲覧（見積もり）
            * → 粗利設定
            * → 見積もりダウンロード
            * → 発注書作成
        * → 案件追加
        * → 案件編集
        * → 案件アーカイブ
        * → 見積もり転送
        * → チャット機能
        * → 会議部屋作成
    * → 案件リスト（見積もり）
        * → 案件閲覧（見積もり）
        * → 案件編集（見積もり）
        * → 案件保存（見積もり提出）
        * → チャット機能


# 3. 機能説明

## 3.1. 処理概要
 * ログイン処理：メルアド＋PWでのログイン機能
 * 請負元が案件を作成し、案件名や見積もり期限などを設定
     * １から入力するパターンと、エクセルを使って登録する２パターンがある。
 * 案件を作成したら、その案件を登録されている下請けへ見積もり依頼としてメッセージを送る。
 * 見積もり依頼者は、見積もり依頼に対して単価を入れて、請負元へ返す。
 * 請負元は請負先から届けられた見積もりを精査し、粗利を設定する。（精査の方法を考えないと・・・）
 * 請負元は精査したデータをもとに入札などを実施する。
 * 落札などが完了したら、各請負先へ発注書を送り、業務開始となる。
 * この一連の流れに対しては、チャットやTV会議などでコミュニケーションをとる。


## 3.2. 各画面機能

### 3.2.1. 全体
* materila/ui を使用したデザインを基調とすること。
* いきなり重い機能を実装しようとしないこと！(Firebaseログインとか、エクセルAPIとか)

### 3.2.2. ログイン画面
* GGA向けには、メールアドレスベースのログイン機能とする。
* ユーザー登録については、簡易であればあっても良いが、後々消す。
    * ユーザー登録については、サブスク課金となるため、その辺りの機能を追加する必要があるため、今回は実装しない。
* ログイン後は、ユーザーインフォーメーションへ飛ぶ。
* 直接URLを指定された場合には、セッションがなければ、ログイン画面へ飛ばすようにしておくこと。
* セッションタイムはひとまず1日程度でOK

### 3.2.3. ユーザーインフォメーション
* ログイン画面からの遷移先
* 各メニューの掛橋となる
* インフォーメーション画面には、何出す？
* スマホはとりあえずは考えなくてOK 綺麗なレスポンシブにする必要はない
* 左にメニュー、中央にデータ表示画面、右にチャット機能の中身、のような構成となる。
* 中央の画面を入れ替える形として、大きな画面遷移は行わない。

### 3.2.4. 案件リスト（元請け）
* カラム設定

|  No  |     案件名    |    期限    |  ステータス  |  見積進捗  |  アクション  |
| ---- | ---- |---- |---- |---- |---- |
|   1  | 若プロビル建設 | 2021/12/31 |  見積待ち   |  3/10     |   閲覧 編集 完了する |
|   2  | YB倉庫建設 | 2022/1/31 |  案件作成中   |  0/0     |   閲覧 編集 完了する |
|   3  | 若狭屋内装工事 | 2021/11/31 |  精査待ち   | 5/5     |   閲覧 編集 完了する |
|   4  | 〇〇公共工事 | 2021/10/31 |   発注待ち   |  20/20     |   閲覧 編集 完了する |

* front
    * 案件名はリンク。
    * テーブル型として、各項目をクリックで昇順・降順の並び替えができるようにしておく。（手動での並び替えには対応しない。）
    * アクション部分をボタンとして、各画面へ遷移する。
    * 完了するのクリックでアーカイブ化（削除はしないこと！）
    * アーカイブデータも探せるように、トップに検索画面が必要になるかも。
* backend
    * Session からUidを取得し、自分が作った案件のリストをJsonで返却する。
    * 編集・閲覧・完了では、案件Noが渡ってくる。
    * 編集・閲覧の場合は、Detailテーブルのデータを返す。
    * 完了の場合は、処理が成功したかどうかのデータを返す。
    * 案件のdatabaseは、案件のテーブルと案件の詳細のリレーションとし、見積もりのテーブルは別に用意する。
    * また、案件には、見積もりをユーザーに送信する機能もあるため、そのためのカラムもしくは、テーブルも用意が必要

### 3.2.5. 案件リスト（見積もり）
* カラム設定

|  No  |     元請け    |    案件名    |    期限    |  ステータス  |   アクション  |
| ---- | ---- |---- |---- |---- |---- |
|   1  | 若プロ建設 | 若プロビル建設 | 2021/12/31 |  見積待ち   | 閲覧 見積する |
|   3  | 大西ホームズ| 若狭屋内装工事 | 2021/11/31 |  見積済み   | 閲覧 見積する |
|   4  | コントラクト | 〇〇公共工事 | 2021/10/31 |   発注済   | 閲覧 見積する 発注確認 |

* front
    * 案件作成後に自分の会社に送信された見積もりのみ表示させること。
    * ステータスが発注済みの場合、発注確認ボタンを表示する。
* backend
    * Session からUidを取得し、割り振られた案件のリストをJsonで返却する。
    * 閲覧・見積する・発注確認では、案件Noが渡ってくるため、Detailテーブルのデータを返す。

### 3.2.6. 案件閲覧（見積もり）

* カラム設定

